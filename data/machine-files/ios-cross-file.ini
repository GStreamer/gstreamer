[constants]
ios_sdk      = '/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk'
ios_minver   = '12.0'
common_args     = ['-isysroot', ios_sdk, '-mios-version-min=' + ios_minver, '-F' + ios_sdk / 'System/Library/Frameworks']

[host_machine]
system = 'darwin'
subsystem = 'ios'
cpu_family = 'aarch64'
cpu = 'aarch64'
endian = 'little'

[built-in options]
c_args              = common_args
cpp_args            = common_args
objc_args           = common_args
objcpp_args         = common_args
c_link_args         = common_args
cpp_link_args       = common_args
objc_link_args      = common_args
objcpp_link_args    = common_args
auto_features       = 'disabled'
default_library     = 'static'

[properties]
# https://github.com/mesonbuild/meson/pull/15514
needs_exe_wrapper   = true

[project options]
orc = 'enabled'
orc-compiler = 'disabled'
# Needs an openssl wrap
libnice = 'disabled'
tls = 'disabled'
# Cross-compiling
introspection = 'disabled'
python = 'disabled'
tests = 'disabled'
examples = 'disabled'
# Untested
qt5 = 'disabled'
# Faster build
devtools = 'disabled'
ges = 'disabled'
libav = 'disabled'
rtsp_server = 'disabled'
ugly = 'disabled'
rs = 'disabled'

[gst-plugins-base:project options]
gl = 'enabled'
gl-graphene = 'enabled'
gl_api = ['gles2']
gl_platform = ['eagl']
gl_winsys = ['eagl']
opus = 'enabled'
pango = 'enabled'

[gst-plugins-good:project options]
cairo = 'enabled'
osxaudio = 'enabled'
soup = 'enabled'
soup-version = '3'
# https://gitlab.freedesktop.org/gstreamer/meson-ports/libvpx/-/merge_requests/28
#vpx = 'enabled'

[gst-plugins-bad:project options]
applemedia = 'enabled'
gl = 'enabled'
opus = 'enabled'
#vulkan = 'enabled'

[cairo:project options]
glib = 'enabled'
freetype = 'enabled'
fontconfig = 'enabled'
zlib = 'enabled'
png = 'enabled'

[pango:project options]
freetype = 'enabled'
fontconfig = 'enabled'

[libvpx:project options]
vp8 = 'enabled'
vp9 = 'enabled'
tools = 'disabled'
examples = 'disabled'
docs = 'disabled'

[binaries]
c = ['clang', '-arch', 'arm64']
cpp = ['clang++', '-arch', 'arm64']
objc = ['clang', '-arch', 'arm64']
objcpp = ['clang++', '-arch', 'arm64']
ar = 'ar'
strip = 'strip'
# Don't pick up anything from the system
qmake = 'false'
pkg-config = 'false'
cmake = 'false'
