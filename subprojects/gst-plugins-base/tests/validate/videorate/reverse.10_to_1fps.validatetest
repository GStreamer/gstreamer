set-globals, in_framerate="(GstFraction)10/1", out_framerate="(GstFraction)1/1"

include, location="videorate-test.meta"

play
seek, start=0.0, stop=5.0, flags=accurate+flush, rate=-1.0

# First buffer is display as fast as possible
crank-clock, expected-elapsed-time=0.0
check-position, expected-position=5.0

crank-clock, expected-elapsed-time=1.0
check-position, expected-position=4.0

crank-clock, expected-elapsed-time=1.0
check-position, expected-position=3.0

crank-clock, expected-elapsed-time=1.0
check-position, expected-position=2.0

crank-clock, expected-elapsed-time=1.0
check-position, expected-position=1.0

# Waiting 1 second on EOS
crank-clock, expected-elapsed-time=1.0
check-position, expected-position=0.0

seek, start=5.0, stop=10.0, flags=accurate+flush, rate=-1.0, on-message=eos

# First buffer is display as fast as possible
crank-clock, expected-elapsed-time=0.0
crank-clock, repeat=4, expected-elapsed-time=1.0

# Waiting 1 second on EOS
crank-clock, expected-elapsed-time=1.0

stop, on-message=eos
